# CAP-теорема.
CAP-теорема — утверждение о том, что в распределённых системах нельзя одновременно добиться трёх свойств:

- Consistency/Консистентность (C) — Каждое чтение даст самую последнюю запись.
- Availability/Доступность (A) — Каждый узел (не упавший) всегда успешно выполняет запросы (на чтение и запись).
- Partition tolerance/Устойчивость к разделению (P) — даже если связь в системе стала нестабильной (вплоть до разделения системы на куски), но узлы работают, то система в целом продолжает работать.

Соответственно в распределенной системе возможно выбрать только 2 из 3-х свойств.
Блок схемой теорема CAP будет выглядить:

## Блок схема теоремы CAP.
![alt text](https://github.com/nol1v3/OTUS-homework/blob/main/lesson_2/cap-teorema.png)

## MongoDB в CAP-теореме.
Следующие пункты относятся к MongoDB.

- MongoDB обеспечивает strong consistency, потому что это система с одним Master узлом, и все записи идут по умолчанию в него.
- Автоматическая смена мастера, в случае отделения его от остальных узлов.
- В случае разделения сети, система прекратит принимать записи до тех пор, пока не убедится, что может безопасно завершить их.

Таким образом, система может продолжать работу в случае разделения сети, но теряется CAP-availability всех узлов. Это CP система!

## MSSQL в CAP-теореме.
Следующие пункты относятся к БД MSSQL.

- Репликация Master-Slave — одно из распространенных решений.
- Синхронизация с Master в асинхронном/синхронном режиме.
- Система транзакций использует двухфазный коммит для обеспечения консистентности.
- Если возникает разделение, невозможно взаимодейстовать с системой (в базовых сценариях).

Таким образом, система не может продолжать работу в случае разделение, но обеспечивает консистентность и дступность. Это система CA!

## Cassandra в CAP-теореме.
Cassandra использует схему репликации master-master, что фактически означает AP систему, в которой разделение сети приводит к самодостаточному функционированию всех узлов.
